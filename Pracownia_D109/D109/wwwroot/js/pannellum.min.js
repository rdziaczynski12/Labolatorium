window.libpannellum=function(n,t,i){function r(r){function vt(n,t){return 1==n.level&&1!=t.level?-1:1==t.level&&1!=n.level?1:t.timestamp-n.timestamp}function yt(n,t){return n.level!=t.level?n.level-t.level:n.diff-t.diff}function k(n,t,i,r,u,f){this.vertices=n;this.side=t;this.level=i;this.x=r;this.y=u;this.path=f.replace("%s",t).replace("%l",i).replace("%x",r).replace("%y",u)}function et(n,t,i,r,u){var f,o=t.vertices;f=d(n,o.slice(0,3));var e=d(n,o.slice(3,6)),s=d(n,o.slice(6,9)),o=d(n,o.slice(9,12)),h=f[0]+e[0]+s[0]+o[0];if(-4==h||4==h?f=!1:(h=f[1]+e[1]+s[1]+o[1],f=-4==h||4==h?!1:4!=f[2]+e[2]+s[2]+o[2]),f){for(f=t.vertices,e=f[0]+f[3]+f[6]+f[9],s=f[1]+f[4]+f[7]+f[10],o=f[2]+f[5]+f[8]+f[11],h=Math.sqrt(e*e+s*s+o*o),o=Math.asin(o/h),e=Math.atan2(s,e)-r,e+=e>Math.PI?-2*Math.PI:e<-Math.PI?2*Math.PI:0,e=Math.abs(e),t.diff=Math.acos(Math.sin(i)*Math.sin(o)+Math.cos(i)*Math.cos(o)*Math.cos(e)),e=!1,s=0;s<c.nodeCache.length;s++)if(c.nodeCache[s].path==t.path){e=!0;c.nodeCache[s].timestamp=c.nodeCacheTimestamp++;c.nodeCache[s].diff=t.diff;c.currentNodes.push(c.nodeCache[s]);break}if(e||(t.timestamp=c.nodeCacheTimestamp++,c.currentNodes.push(t),c.nodeCache.push(t)),t.level<c.level){var o=l.cubeResolution*Math.pow(2,t.level-l.maxLevel),e=Math.ceil(o*l.invTileResolution)-1,s=o%l.tileResolution*2,a=2*o%l.tileResolution;0===a&&(a=l.tileResolution);0===s&&(s=2*l.tileResolution);h=.5;(t.x==e||t.y==e)&&(h=1-l.tileResolution/(l.tileResolution+a));var p=1-h,o=[],w=h,b=h,v=h,g=p,nt=p,y=p;for(a<l.tileResolution&&(t.x==e&&t.y!=e?(nt=b=.5,"d"==t.side||"u"==t.side)&&(y=v=.5):t.x!=e&&t.y==e&&(g=w=.5,"l"==t.side||"r"==t.side)&&(y=v=.5)),s<=l.tileResolution&&(t.x==e&&(w=0,g=1,"l"==t.side||"r"==t.side)&&(v=0,y=1),t.y==e&&(b=0,nt=1,"d"==t.side||"u"==t.side)&&(v=0,y=1)),a=[f[0],f[1],f[2],f[0]*w+f[3]*g,f[1]*h+f[4]*p,f[2]*v+f[5]*y,f[0]*w+f[6]*g,f[1]*b+f[7]*nt,f[2]*v+f[8]*y,f[0]*h+f[9]*p,f[1]*b+f[10]*nt,f[2]*v+f[11]*y],a=new k(a,t.side,t.level+1,2*t.x,2*t.y,l.fullpath),o.push(a),t.x==e&&s<=l.tileResolution||(a=[f[0]*w+f[3]*g,f[1]*h+f[4]*p,f[2]*v+f[5]*y,f[3],f[4],f[5],f[3]*h+f[6]*p,f[4]*b+f[7]*nt,f[5]*v+f[8]*y,f[0]*w+f[6]*g,f[1]*b+f[7]*nt,f[2]*v+f[8]*y],a=new k(a,t.side,t.level+1,2*t.x+1,2*t.y,l.fullpath),o.push(a)),t.x==e&&s<=l.tileResolution||t.y==e&&s<=l.tileResolution||(a=[f[0]*w+f[6]*g,f[1]*b+f[7]*nt,f[2]*v+f[8]*y,f[3]*h+f[6]*p,f[4]*b+f[7]*nt,f[5]*v+f[8]*y,f[6],f[7],f[8],f[9]*w+f[6]*g,f[10]*h+f[7]*p,f[11]*v+f[8]*y],a=new k(a,t.side,t.level+1,2*t.x+1,2*t.y+1,l.fullpath),o.push(a)),t.y==e&&s<=l.tileResolution||(a=[f[0]*h+f[9]*p,f[1]*b+f[10]*nt,f[2]*v+f[11]*y,f[0]*w+f[6]*g,f[1]*b+f[7]*nt,f[2]*v+f[8]*y,f[9]*w+f[6]*g,f[10]*h+f[7]*p,f[11]*v+f[8]*y,f[9],f[10],f[11]],a=new k(a,t.side,t.level+1,2*t.x,2*t.y+1,l.fullpath),o.push(a)),t=0;t<o.length;t++)et(n,o[t],i,r,u)}}}function ot(){return[-1,1,-1,1,1,-1,1,-1,-1,-1,-1,-1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,-1,1,1,1,1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1,1,-1,1,-1,-1,1,-1,1,1,-1,1,-1,-1,-1,-1,-1,-1,1,1,1,-1,1,1,1,1,-1,1,1,-1,-1]}function tt(n,t,i){var r=Math.sin(t);return(t=Math.cos(t),"x"==i)?[n[0],t*n[1]+r*n[2],t*n[2]-r*n[1],n[3],t*n[4]+r*n[5],t*n[5]-r*n[4],n[6],t*n[7]+r*n[8],t*n[8]-r*n[7]]:"y"==i?[t*n[0]-r*n[2],n[1],t*n[2]+r*n[0],t*n[3]-r*n[5],n[4],t*n[5]+r*n[3],t*n[6]-r*n[8],n[7],t*n[8]+r*n[6]]:"z"==i?[t*n[0]+r*n[1],t*n[1]-r*n[0],n[2],t*n[3]+r*n[4],t*n[4]-r*n[3],n[5],t*n[6]+r*n[7],t*n[7]-r*n[6],n[8]]:void 0}function st(n){return[n[0],n[4],n[8],n[12],n[1],n[5],n[9],n[13],n[2],n[6],n[10],n[14],n[3],n[7],n[11],n[15]]}function pt(n){n.textureLoad||(n.textureLoad=!0,at(encodeURI(n.path+"."+l.extension),function(t){n.texture=t;n.textureLoaded=!0},nt.crossOrigin))}function d(n,t){var i=[n[0]*t[0]+n[1]*t[1]+n[2]*t[2],n[4]*t[0]+n[5]*t[1]+n[6]*t[2],n[11]+n[8]*t[0]+n[9]*t[1]+n[10]*t[2],1/(n[12]*t[0]+n[13]*t[1]+n[14]*t[2])],u=i[0]*i[3],f=i[1]*i[3],i=i[2]*i[3],r=[0,0,0];return-1>u&&(r[0]=-1),1<u&&(r[0]=1),-1>f&&(r[1]=-1),1<f&&(r[1]=1),(-1>i||1<i)&&(r[2]=1),r}function ht(){console.log("Reducing canvas size due to error 1286!");a.width=Math.round(a.width/2);a.height=Math.round(a.height/2)}var a=t.createElement("canvas"),c,h,p,w,ct,y,it,b,l,v,lt,rt,ut,g,ft,nt,at;a.style.width=a.style.height="100%";r.appendChild(a);this.init=function(n,k,d,tt,et,st,at,vt){if(k===i&&(k="equirectangular"),"equirectangular"!=k&&"cubemap"!=k&&"multires"!=k)throw console.log("Error: invalid image type specified!"),{type:"config error"};if(v=k,l=n,lt=d,nt=vt||{},c){if(p&&(h.detachShader(c,p),h.deleteShader(p)),w&&(h.detachShader(c,w),h.deleteShader(w)),h.bindBuffer(h.ARRAY_BUFFER,null),h.bindBuffer(h.ELEMENT_ARRAY_BUFFER,null),c.texture&&h.deleteTexture(c.texture),c.nodeCache)for(n=0;n<c.nodeCache.length;n++)h.deleteTexture(c.nodeCache[n].texture);h.deleteProgram(c);c=i}if(b=i,"cubemap"==v&&0!=(l[0].width&l[0].width-1)&&(navigator.userAgent.toLowerCase().match(/(iphone|ipod|ipad).* os 8_/)||navigator.userAgent.toLowerCase().match(/(iphone|ipod|ipad).* os 9_/)||navigator.userAgent.toLowerCase().match(/(iphone|ipod|ipad).* os 10_/)||navigator.userAgent.match(/Trident.*rv[ :]*11\./))||(h||(h=a.getContext("experimental-webgl",{alpha:!1,depth:!1})),h&&1286==h.getError()&&ht()),!h&&("multires"==v&&l.hasOwnProperty("fallbackPath")||"cubemap"==v)&&("WebkitAppearance"in t.documentElement.style||navigator.userAgent.match(/Trident.*rv[ :]*11\./)||-1!==navigator.appVersion.indexOf("MSIE 10"))){y&&r.removeChild(y);y=t.createElement("div");y.className="pnlm-world";tt=l.basePath?l.basePath+l.fallbackPath:l.fallbackPath;var yt="frblud".split(""),pt=0;for(et=function(){var n=t.createElement("canvas"),e,o,u,f,i;for(n.className="pnlm-face pnlm-"+yt[this.side]+"face",y.appendChild(n),e=n.getContext("2d"),n.style.width=this.width+4+"px",n.style.height=this.height+4+"px",n.width=this.width+4,n.height=this.height+4,e.drawImage(this,2,2),o=e.getImageData(0,0,n.width,n.height),u=o.data,f=2;f<n.width-2;f++)for(i=0;4>i;i++)u[4*(f+n.width)+i]=u[4*(f+2*n.width)+i],u[4*(f+n.width*(n.height-2))+i]=u[4*(f+n.width*(n.height-3))+i];for(f=2;f<n.height-2;f++)for(i=0;4>i;i++)u[4*(f*n.width+1)+i]=u[4*(f*n.width+2)+i],u[4*((f+1)*n.width-2)+i]=u[4*((f+1)*n.width-3)+i];for(i=0;4>i;i++)u[4*(n.width+1)+i]=u[4*(2*n.width+2)+i],u[4*(2*n.width-2)+i]=u[4*(3*n.width-3)+i],u[4*(n.width*(n.height-2)+1)+i]=u[4*(n.width*(n.height-3)+2)+i],u[4*(n.width*(n.height-1)-2)+i]=u[4*(n.width*(n.height-2)-3)+i];for(f=1;f<n.width-1;f++)for(i=0;4>i;i++)u[4*f+i]=u[4*(f+n.width)+i],u[4*(f+n.width*(n.height-1))+i]=u[4*(f+n.width*(n.height-2))+i];for(f=1;f<n.height-1;f++)for(i=0;4>i;i++)u[f*n.width*4+i]=u[4*(f*n.width+1)+i],u[4*((f+1)*n.width-1)+i]=u[4*((f+1)*n.width-2)+i];for(i=0;4>i;i++)u[i]=u[4*(n.width+1)+i],u[4*(n.width-1)+i]=u[4*(2*n.width-2)+i],u[n.width*(n.height-1)*4+i]=u[4*(n.width*(n.height-2)+1)+i],u[4*(n.width*n.height-1)+i]=u[4*(n.width*(n.height-1)-2)+i];e.putImageData(o,0,0);pt++;6==pt&&(ct=this.width,r.appendChild(y),at())},n=0;6>n;n++)st=new Image,st.crossOrigin=nt.crossOrigin?nt.crossOrigin:"anonymous",st.side=n,st.onload=et,st.src="multires"==v?encodeURI(tt.replace("%s",yt[n])+"."+l.extension):encodeURI(l[n].src)}else{if(!h)throw console.log("Error: no WebGL support detected!"),{type:"no webgl"};for(l.fullpath=l.basePath?l.basePath+l.path:l.path,l.invTileResolution=1/l.tileResolution,k=ot(),it=[],n=0;6>n;n++)it[n]=k.slice(12*n,12*n+12),k=ot();if("equirectangular"==v){if(n=Math.max(l.width,l.height),k=h.getParameter(h.MAX_TEXTURE_SIZE),n>k)throw console.log("Error: The image is too big; it's "+n+"px wide, but this device's maximum supported width is "+k+"px."),{type:"webgl size error",width:n,maxWidth:k};}else if("cubemap"==v&&(n=l[0].width,k=h.getParameter(h.MAX_CUBE_MAP_TEXTURE_SIZE),n>k))throw console.log("Error: The cube face image is too big; it's "+n+"px wide, but this device's maximum supported width is "+k+"px."),{type:"webgl size error",width:n,maxWidth:k};if(vt===i||vt.horizonPitch===i&&vt.horizonRoll===i||(b=[vt.horizonPitch==i?0:vt.horizonPitch,vt.horizonRoll==i?0:vt.horizonRoll]),n=h.TEXTURE_2D,h.viewport(0,0,h.drawingBufferWidth,h.drawingBufferHeight),p=h.createShader(h.VERTEX_SHADER),k=u,"multires"==v&&(k=f),h.shaderSource(p,k),h.compileShader(p),w=h.createShader(h.FRAGMENT_SHADER),k=o,"cubemap"==v?(n=h.TEXTURE_CUBE_MAP,k=e):"multires"==v&&(k=s),h.shaderSource(w,k),h.compileShader(w),c=h.createProgram(),h.attachShader(c,p),h.attachShader(c,w),h.linkProgram(c),h.getShaderParameter(p,h.COMPILE_STATUS)||console.log(h.getShaderInfoLog(p)),h.getShaderParameter(w,h.COMPILE_STATUS)||console.log(h.getShaderInfoLog(w)),h.getProgramParameter(c,h.LINK_STATUS)||console.log(h.getProgramInfoLog(c)),h.useProgram(c),c.drawInProgress=!1,c.texCoordLocation=h.getAttribLocation(c,"a_texCoord"),h.enableVertexAttribArray(c.texCoordLocation),"multires"!=v?(rt||(rt=h.createBuffer()),h.bindBuffer(h.ARRAY_BUFFER,rt),h.bufferData(h.ARRAY_BUFFER,new Float32Array([-1,1,1,1,1,-1,-1,1,1,-1,-1,-1]),h.STATIC_DRAW),h.vertexAttribPointer(c.texCoordLocation,2,h.FLOAT,!1,0,0),c.aspectRatio=h.getUniformLocation(c,"u_aspectRatio"),h.uniform1f(c.aspectRatio,h.drawingBufferWidth/h.drawingBufferHeight),c.psi=h.getUniformLocation(c,"u_psi"),c.theta=h.getUniformLocation(c,"u_theta"),c.f=h.getUniformLocation(c,"u_f"),c.h=h.getUniformLocation(c,"u_h"),c.v=h.getUniformLocation(c,"u_v"),c.vo=h.getUniformLocation(c,"u_vo"),c.rot=h.getUniformLocation(c,"u_rot"),h.uniform1f(c.h,tt/(2*Math.PI)),h.uniform1f(c.v,et/Math.PI),h.uniform1f(c.vo,st/Math.PI*2),"equirectangular"==v&&(c.backgroundColor=h.getUniformLocation(c,"u_backgroundColor"),h.uniform4fv(c.backgroundColor,(vt.backgroundColor?vt.backgroundColor:[0,0,0]).concat([1]))),c.texture=h.createTexture(),h.bindTexture(n,c.texture),"cubemap"==v?(h.texImage2D(h.TEXTURE_CUBE_MAP_POSITIVE_X,0,h.RGB,h.RGB,h.UNSIGNED_BYTE,l[1]),h.texImage2D(h.TEXTURE_CUBE_MAP_NEGATIVE_X,0,h.RGB,h.RGB,h.UNSIGNED_BYTE,l[3]),h.texImage2D(h.TEXTURE_CUBE_MAP_POSITIVE_Y,0,h.RGB,h.RGB,h.UNSIGNED_BYTE,l[4]),h.texImage2D(h.TEXTURE_CUBE_MAP_NEGATIVE_Y,0,h.RGB,h.RGB,h.UNSIGNED_BYTE,l[5]),h.texImage2D(h.TEXTURE_CUBE_MAP_POSITIVE_Z,0,h.RGB,h.RGB,h.UNSIGNED_BYTE,l[0]),h.texImage2D(h.TEXTURE_CUBE_MAP_NEGATIVE_Z,0,h.RGB,h.RGB,h.UNSIGNED_BYTE,l[2])):h.texImage2D(n,0,h.RGB,h.RGB,h.UNSIGNED_BYTE,l),h.texParameteri(n,h.TEXTURE_WRAP_S,h.CLAMP_TO_EDGE),h.texParameteri(n,h.TEXTURE_WRAP_T,h.CLAMP_TO_EDGE),h.texParameteri(n,h.TEXTURE_MIN_FILTER,h.LINEAR),h.texParameteri(n,h.TEXTURE_MAG_FILTER,h.LINEAR)):(c.vertPosLocation=h.getAttribLocation(c,"a_vertCoord"),h.enableVertexAttribArray(c.vertPosLocation),ut||(ut=h.createBuffer()),g||(g=h.createBuffer()),ft||(ft=h.createBuffer()),h.bindBuffer(h.ARRAY_BUFFER,g),h.bufferData(h.ARRAY_BUFFER,new Float32Array([0,0,1,0,1,1,0,1]),h.STATIC_DRAW),h.bindBuffer(h.ELEMENT_ARRAY_BUFFER,ft),h.bufferData(h.ELEMENT_ARRAY_BUFFER,new Uint16Array([0,1,2,0,2,3]),h.STATIC_DRAW),c.perspUniform=h.getUniformLocation(c,"u_perspMatrix"),c.cubeUniform=h.getUniformLocation(c,"u_cubeMatrix"),c.level=-1,c.currentNodes=[],c.nodeCache=[],c.nodeCacheTimestamp=0),tt=h.getError(),0!==tt)throw console.log("Error: Something went wrong with WebGL!",tt),{type:"webgl error"};at()}};this.destroy=function(){if(r!==i&&(a!==i&&r.contains(a)&&r.removeChild(a),y!==i&&r.contains(y)&&r.removeChild(y)),h){var n=h.getExtension("WEBGL_lose_context");n&&n.loseContext()}};this.resize=function(){var t=n.devicePixelRatio||1;a.width=a.clientWidth*t;a.height=a.clientHeight*t;h&&(1286==h.getError()&&ht(),h.viewport(0,0,h.drawingBufferWidth,h.drawingBufferHeight),"multires"!=v&&h.uniform1f(c.aspectRatio,a.clientWidth/a.clientHeight))};this.resize();this.setPose=function(n,t){b=[n,t]};this.render=function(n,t,r,u){var e;if(e=0,u===i&&(u={}),u.roll&&(e=u.roll),b!==i){var o=b[0],f=b[1],s=n,p=t,w=Math.cos(f)*Math.sin(n)*Math.sin(o)+Math.cos(n)*(Math.cos(o)*Math.cos(t)+Math.sin(f)*Math.sin(o)*Math.sin(t)),d=-Math.sin(n)*Math.sin(f)+Math.cos(n)*Math.cos(f)*Math.sin(t);n=Math.cos(f)*Math.cos(o)*Math.sin(n)+Math.cos(n)*(-Math.cos(t)*Math.sin(o)+Math.cos(o)*Math.sin(f)*Math.sin(t));n=Math.asin(Math.max(Math.min(n,1),-1));t=Math.atan2(d,w);o=[Math.cos(s)*(Math.sin(f)*Math.sin(o)*Math.cos(p)-Math.cos(o)*Math.sin(p)),Math.cos(s)*Math.cos(f)*Math.cos(p),Math.cos(s)*(Math.cos(o)*Math.sin(f)*Math.cos(p)+Math.sin(p)*Math.sin(o))];f=[-Math.cos(n)*Math.sin(t),Math.cos(n)*Math.cos(t)];f=Math.acos(Math.max(Math.min((o[0]*f[0]+o[1]*f[1])/(Math.sqrt(o[0]*o[0]+o[1]*o[1]+o[2]*o[2])*Math.sqrt(f[0]*f[0]+f[1]*f[1])),1),-1));0>o[2]&&(f=2*Math.PI-f);e+=f}if(h||"multires"!=v&&"cubemap"!=v){if("multires"!=v)r=2*Math.atan(Math.tan(.5*r)/(h.drawingBufferWidth/h.drawingBufferHeight)),r=1/Math.tan(.5*r),h.uniform1f(c.psi,t),h.uniform1f(c.theta,n),h.uniform1f(c.rot,e),h.uniform1f(c.f,r),!0===lt&&"equirectangular"==v&&(h.bindTexture(h.TEXTURE_2D,c.texture),h.texImage2D(h.TEXTURE_2D,0,h.RGB,h.RGB,h.UNSIGNED_BYTE,l)),h.drawArrays(h.TRIANGLES,0,6);else{for(o=h.drawingBufferWidth/h.drawingBufferHeight,f=2*Math.atan(Math.tan(r/2)*h.drawingBufferHeight/h.drawingBufferWidth),f=1/Math.tan(f/2),o=[f/o,0,0,0,0,f,0,0,0,0,100.1/-99.9,20/-99.9,0,0,-1,0],f=1;f<l.maxLevel&&h.drawingBufferWidth>l.tileResolution*Math.pow(2,f-1)*Math.tan(r/2)*.707;)f++;if(c.level=f,f=[1,0,0,0,1,0,0,0,1],f=tt(f,-e,"z"),f=tt(f,-n,"x"),f=tt(f,t,"y"),f=[f[0],f[1],f[2],0,f[3],f[4],f[5],0,f[6],f[7],f[8],0,0,0,0,1],h.uniformMatrix4fv(c.perspUniform,!1,new Float32Array(st(o))),h.uniformMatrix4fv(c.cubeUniform,!1,new Float32Array(st(f))),o=[o[0]*f[0],o[0]*f[1],o[0]*f[2],0,o[5]*f[4],o[5]*f[5],o[5]*f[6],0,o[10]*f[8],o[10]*f[9],o[10]*f[10],o[11],-f[8],-f[9],-f[10],0],c.nodeCache.sort(vt),200<c.nodeCache.length&&c.nodeCache.length>c.currentNodes.length+50)for(f=c.nodeCache.splice(200,c.nodeCache.length-200),e=0;e<f.length;e++)h.deleteTexture(f[e].texture);for(c.currentNodes=[],f="fbudlr".split(""),e=0;6>e;e++)s=new k(it[e],f[e],1,0,0,l.fullpath),et(o,s,n,t,r);for(c.currentNodes.sort(yt),e=0;e<c.currentNodes.length;e++)if(!c.currentNodes[e].texture){setTimeout(pt,0,c.currentNodes[e]);break}if(!c.drawInProgress){for(c.drawInProgress=!0,n=0;n<c.currentNodes.length;n++)c.currentNodes[n].textureLoaded&&(h.bindBuffer(h.ARRAY_BUFFER,ut),h.bufferData(h.ARRAY_BUFFER,new Float32Array(c.currentNodes[n].vertices),h.STATIC_DRAW),h.vertexAttribPointer(c.vertPosLocation,3,h.FLOAT,!1,0,0),h.bindBuffer(h.ARRAY_BUFFER,g),h.vertexAttribPointer(c.texCoordLocation,2,h.FLOAT,!1,0,0),h.bindTexture(h.TEXTURE_2D,c.currentNodes[n].texture),h.drawElements(h.TRIANGLES,6,h.UNSIGNED_SHORT,0));c.drawInProgress=!1}}if(u.returnImage!==i)return a.toDataURL("image/png")}else for(e=ct/2,u={f:"translate3d(-"+(e+2)+"px, -"+(e+2)+"px, -"+e+"px)",b:"translate3d("+(e+2)+"px, -"+(e+2)+"px, "+e+"px) rotateX(180deg) rotateZ(180deg)",u:"translate3d(-"+(e+2)+"px, -"+e+"px, "+(e+2)+"px) rotateX(270deg)",d:"translate3d(-"+(e+2)+"px, "+e+"px, -"+(e+2)+"px) rotateX(90deg)",l:"translate3d(-"+e+"px, -"+(e+2)+"px, "+(e+2)+"px) rotateX(180deg) rotateY(90deg) rotateZ(180deg)",r:"translate3d("+e+"px, -"+(e+2)+"px, -"+(e+2)+"px) rotateY(270deg)"},r=1/Math.tan(r/2),r=r*h.drawingBufferWidth/2+"px",n="perspective("+r+") translateZ("+r+") rotateX("+n+"rad) rotateY("+t+"rad) ",t=Object.keys(u),e=0;6>e;e++)r=y.querySelector(".pnlm-"+t[e]+"face").style,r.webkitTransform=n+u[t[e]],r.transform=n+u[t[e]]};this.isLoading=function(){if(h&&"multires"==v)for(var n=0;n<c.currentNodes.length;n++)if(!c.currentNodes[n].textureLoaded)return!0;return!1};this.getCanvas=function(){return a};at=function(){function f(){var t=this;this.texture=this.callback=null;this.image=new Image;this.image.crossOrigin=u?u:"anonymous";this.image.addEventListener("load",function(){var u=t.image;h.bindTexture(h.TEXTURE_2D,t.texture);h.texImage2D(h.TEXTURE_2D,0,h.RGB,h.RGB,h.UNSIGNED_BYTE,u);h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MAG_FILTER,h.LINEAR);h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MIN_FILTER,h.LINEAR);h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_S,h.CLAMP_TO_EDGE);h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_T,h.CLAMP_TO_EDGE);h.bindTexture(h.TEXTURE_2D,null);t.callback(t.texture);r.length?(u=r.shift(),t.loadTexture(u.src,u.texture,u.callback)):i[n++]=t})}function e(n,t,i){this.src=n;this.texture=t;this.callback=i}var n=4,i={},r=[],u,t;for(f.prototype.loadTexture=function(n,t,i){this.texture=t;this.callback=i;this.image.src=n},t=0;t<n;t++)i[t]=new f;return function(t,f,o){return u=o,o=h.createTexture(),n?i[--n].loadTexture(t,o,f):r.push(new e(t,o,f)),o}}()}var u="attribute vec2 a_texCoord;varying vec2 v_texCoord;void main() {gl_Position = vec4(a_texCoord, 0.0, 1.0);v_texCoord = a_texCoord;}",f="attribute vec3 a_vertCoord;attribute vec2 a_texCoord;uniform mat4 u_cubeMatrix;uniform mat4 u_perspMatrix;varying mediump vec2 v_texCoord;void main(void) {gl_Position = u_perspMatrix * u_cubeMatrix * vec4(a_vertCoord, 1.0);v_texCoord = a_texCoord;}",e="precision mediump float;\nuniform float u_aspectRatio;\nuniform float u_psi;\nuniform float u_theta;\nuniform float u_f;\nuniform float u_h;\nuniform float u_v;\nuniform float u_vo;\nuniform float u_rot;\nconst float PI = 3.14159265358979323846264;\nuniform sampler2D u_image;\nuniform samplerCube u_imageCube;\nvarying vec2 v_texCoord;\nuniform vec4 u_backgroundColor;\nvoid main() {\nfloat x = v_texCoord.x * u_aspectRatio;\nfloat y = v_texCoord.y;\nfloat sinrot = sin(u_rot);\nfloat cosrot = cos(u_rot);\nfloat rot_x = x * cosrot - y * sinrot;\nfloat rot_y = x * sinrot + y * cosrot;\nfloat sintheta = sin(u_theta);\nfloat costheta = cos(u_theta);\nfloat a = u_f * costheta - rot_y * sintheta;\nfloat root = sqrt(rot_x * rot_x + a * a);\nfloat lambda = atan(rot_x / root, a / root) + u_psi;\nfloat phi = atan((rot_y * costheta + u_f * sintheta) / root);float cosphi = cos(phi);\ngl_FragColor = textureCube(u_imageCube, vec3(cosphi*sin(lambda), sin(phi), cosphi*cos(lambda)));\n}",o="precision mediump float;\nuniform float u_aspectRatio;\nuniform float u_psi;\nuniform float u_theta;\nuniform float u_f;\nuniform float u_h;\nuniform float u_v;\nuniform float u_vo;\nuniform float u_rot;\nconst float PI = 3.14159265358979323846264;\nuniform sampler2D u_image;\nuniform samplerCube u_imageCube;\nvarying vec2 v_texCoord;\nuniform vec4 u_backgroundColor;\nvoid main() {\nfloat x = v_texCoord.x * u_aspectRatio;\nfloat y = v_texCoord.y;\nfloat sinrot = sin(u_rot);\nfloat cosrot = cos(u_rot);\nfloat rot_x = x * cosrot - y * sinrot;\nfloat rot_y = x * sinrot + y * cosrot;\nfloat sintheta = sin(u_theta);\nfloat costheta = cos(u_theta);\nfloat a = u_f * costheta - rot_y * sintheta;\nfloat root = sqrt(rot_x * rot_x + a * a);\nfloat lambda = atan(rot_x / root, a / root) + u_psi;\nfloat phi = atan((rot_y * costheta + u_f * sintheta) / root);lambda = mod(lambda + PI, PI * 2.0) - PI;\nvec2 coord = vec2(lambda / PI, phi / (PI / 2.0));\nif(coord.x < -u_h || coord.x > u_h || coord.y < -u_v + u_vo || coord.y > u_v + u_vo)\ngl_FragColor = u_backgroundColor;\nelse\ngl_FragColor = texture2D(u_image, vec2((coord.x + u_h) / (u_h * 2.0), (-coord.y + u_v + u_vo) / (u_v * 2.0)));\n}",s="varying mediump vec2 v_texCoord;uniform sampler2D u_sampler;void main(void) {gl_FragColor = texture2D(u_sampler, v_texCoord);}";return{renderer:function(n,t,i,u){return new r(n,t,i,u)}}}(window,document);window.requestAnimationFrame||(window.requestAnimationFrame=function(){return window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(n){window.setTimeout(n,1e3/60)}}());window.pannellum=function(n,t,i){function r(r,u){function vr(t){n.removeEventListener("deviceorientation",vr);t&&null!==t.alpha&&null!==t.beta&&null!==t.gamma?(s.container.appendChild(s.orientation),vt=!0,ar&&yi()):vt=!1}function yr(){var r=t.createElement("div"),u,o;if(r.innerHTML="<!--[if lte IE 9]><i><\/i><![endif]-->",1==r.getElementsByTagName("i").length)ft();else{if(bt=f.hfov,ei=f.pitch,"cubemap"==f.type){for(b=[],r=0;6>r;r++)b.push(new Image),b[r].crossOrigin=f.crossOrigin;e.load.lbox.style.display="block";e.load.lbar.style.display="none"}else if("multires"==f.type)r=JSON.parse(JSON.stringify(f.multiRes)),f.basePath&&f.multiRes.basePath&&!/^(?:[a-z]+:)?\/\//i.test(f.multiRes.basePath)?r.basePath=f.basePath+f.multiRes.basePath:f.multiRes.basePath?r.basePath=f.multiRes.basePath:f.basePath&&(r.basePath=f.basePath),b=r;else if(!0===f.dynamic)b=f.panorama;else{if(f.panorama===i){ft(f.strings.noPanoramaError);return}b=new Image}if("cubemap"==f.type)for(var s=6,h=function(){s--;0===s&&oi()},c=function(n){var i=t.createElement("a");i.href=n.target.src;i.innerHTML=i.href;ft(f.strings.fileAccessError.replace("%s",i.outerHTML))},r=0;r<b.length;r++)b[r].onload=h,b[r].onerror=c,u=f.cubeMap[r],f.basePath&&!dt(u)&&(u=f.basePath+u),b[r].src=encodeURI(u);else if("multires"==f.type)oi();else if(u="",f.basePath&&(u=f.basePath),!0!==f.dynamic){u=dt(f.panorama)?f.panorama:u+f.panorama;b.onload=function(){n.URL.revokeObjectURL(this.src);oi()};o=new XMLHttpRequest;o.onloadend=function(){if(200!=o.status){var n=t.createElement("a");n.href=encodeURI(u);n.innerHTML=n.href;ft(f.strings.fileAccessError.replace("%s",n.outerHTML))}cu(this.response);e.load.msg.innerHTML=""};o.onprogress=function(n){if(n.lengthComputable){e.load.lbarFill.style.width=n.loaded/n.total*100+"%";var t,i;1e6<n.total?(t="MB",i=(n.loaded/1e6).toFixed(2),n=(n.total/1e6).toFixed(2)):1e3<n.total?(t="kB",i=(n.loaded/1e3).toFixed(1),n=(n.total/1e3).toFixed(1)):(t="B",i=n.loaded,n=n.total);e.load.msg.innerHTML=i+" / "+n+" "+t}else e.load.lbox.style.display="block",e.load.lbar.style.display="none"};try{o.open("GET",u,!0)}catch(a){ft(f.strings.malformedURLError)}o.responseType="blob";o.setRequestHeader("Accept","image/*,*/*;q=0.9");o.withCredentials="use-credentials"===f.crossOrigin;o.send()}f.draggable&&l.classList.add("pnlm-grab");l.classList.remove("pnlm-grabbing")}}function dt(n){return/^(?:[a-z]+:)?\/\//i.test(n)||"/"==n[0]||"blob:"==n.slice(0,5)}function oi(){c||(c=new libpannellum.renderer(w));or||(or=!0,a.addEventListener("mousedown",pr,!1),t.addEventListener("mousemove",br,!1),t.addEventListener("mouseup",si,!1),f.mouseZoom&&(l.addEventListener("mousewheel",ci,!1),l.addEventListener("DOMMouseScroll",ci,!1)),f.doubleClickZoom&&a.addEventListener("dblclick",wr,!1),l.addEventListener("mozfullscreenchange",tt,!1),l.addEventListener("webkitfullscreenchange",tt,!1),l.addEventListener("msfullscreenchange",tt,!1),l.addEventListener("fullscreenchange",tt,!1),n.addEventListener("resize",li,!1),n.addEventListener("orientationchange",li,!1),f.disableKeyboardCtrl||(r.addEventListener("keydown",gr,!1),r.addEventListener("keyup",tu,!1),r.addEventListener("blur",nu,!1)),t.addEventListener("mouseleave",si,!1),a.addEventListener("touchstart",gi,!1),a.addEventListener("touchmove",nr,!1),a.addEventListener("touchend",tr,!1),a.addEventListener("pointerdown",kr,!1),a.addEventListener("pointermove",dr,!1),a.addEventListener("pointerup",hi,!1),a.addEventListener("pointerleave",hi,!1),n.navigator.pointerEnabled&&(r.style.touchAction="none"));vu();setTimeout(function(){},500)}function cu(t){var r=new FileReader;r.addEventListener("loadend",function(){var o=r.result,e;if(navigator.userAgent.toLowerCase().match(/(iphone|ipod|ipad).* os 8_/)&&(e=o.indexOf("ÿÂ"),(0>e||65536<e)&&ft(f.strings.iOS8WebGLError)),e=o.indexOf("<x:xmpmeta"),-1<e&&!0!==f.ignoreGPanoXMP){var s=o.substring(e,o.indexOf("<\/x:xmpmeta>")+12),u=function(n){var t;return 0<=s.indexOf(n+'="')?(t=s.substring(s.indexOf(n+'="')+n.length+2),t=t.substring(0,t.indexOf('"'))):0<=s.indexOf(n+">")&&(t=s.substring(s.indexOf(n+">")+n.length+1),t=t.substring(0,t.indexOf("<"))),t!==i?Number(t):null},o=u("GPano:FullPanoWidthPixels"),e=u("GPano:CroppedAreaImageWidthPixels"),h=u("GPano:FullPanoHeightPixels"),c=u("GPano:CroppedAreaImageHeightPixels"),l=u("GPano:CroppedAreaTopPixels"),a=u("GPano:PoseHeadingDegrees"),v=u("GPano:PosePitchDegrees"),u=u("GPano:PoseRollDegrees");null!==o&&null!==e&&null!==h&&null!==c&&null!==l&&(0>rt.indexOf("haov")&&(f.haov=e/o*360),0>rt.indexOf("vaov")&&(f.vaov=c/h*180),0>rt.indexOf("vOffset")&&(f.vOffset=-180*((l+c/2)/h-.5)),null!==a&&0>rt.indexOf("northOffset")&&(f.northOffset=a,!1!==f.compass&&(f.compass=!0)),null!==v&&null!==u&&(0>rt.indexOf("horizonPitch")&&(f.horizonPitch=v),0>rt.indexOf("horizonRoll")&&(f.horizonRoll=u)))}b.src=n.URL.createObjectURL(t)});r.readAsBinaryString!==i?r.readAsBinaryString(t):r.readAsText(t)}function ft(n){n===i&&(n=f.strings.genericWebGLError);e.errorMsg.innerHTML="<p>"+n+"<\/p>";s.load.style.display="none";e.load.box.style.display="none";e.errorMsg.style.display="table";bi=!0;w.style.display="none";et("error",n)}function gt(n){var t=ht(n);ut.style.left=t.x+"px";ut.style.top=t.y+"px";clearTimeout(gt.t1);clearTimeout(gt.t2);ut.style.display="block";ut.style.opacity=1;gt.t1=setTimeout(function(){ut.style.opacity=0},2e3);gt.t2=setTimeout(function(){ut.style.display="none"},2500);n.preventDefault()}function ht(n){var i=r.getBoundingClientRect(),t={};return t.x=n.clientX-i.left,t.y=n.clientY-i.top,t}function pr(n){var t,i;n.preventDefault();r.focus();p&&f.draggable&&(t=ht(n),f.hotSpotDebug&&(i=di(n),console.log("Pitch: "+i[0]+", Yaw: "+i[1]+", Center Pitch: "+f.pitch+", Center Yaw: "+f.yaw+", HFOV: "+f.hfov)),vi(),ti(),f.roll=0,h.hfov=0,ct=!0,k=Date.now(),ii=t.x,ri=t.y,pi=f.yaw,wi=f.pitch,l.classList.add("pnlm-grabbing"),l.classList.remove("pnlm-grab"),et("mousedown",n),v())}function wr(n){f.minHfov===f.hfov?wt.setHfov(bt,1e3):(n=di(n),wt.lookAt(n[0],n[1],f.minHfov,1e3))}function di(n){var r=ht(n),t,i;n=c.getCanvas();t=n.clientWidth;i=n.clientHeight;n=r.x/t*2-1;var i=(1-r.y/i*2)*i/t,u=1/Math.tan(f.hfov*Math.PI/360),e=Math.sin(f.pitch*Math.PI/180),o=Math.cos(f.pitch*Math.PI/180),r=u*o-i*e,t=Math.sqrt(n*n+r*r),i=180*Math.atan((i*o+u*e)/t)/Math.PI;return n=180*Math.atan2(n/t,r/t)/Math.PI+f.yaw,-180>n&&(n+=360),180<n&&(n-=360),[i,n]}function br(n){var r;if(ct&&p){k=Date.now();var i=c.getCanvas(),t=i.clientWidth,i=i.clientHeight;n=ht(n);r=180*(Math.atan(ii/t*2-1)-Math.atan(n.x/t*2-1))/Math.PI*f.hfov/90+pi;h.yaw=(r-f.yaw)%360*.2;f.yaw=r;t=360*Math.atan(Math.tan(f.hfov/360*Math.PI)*i/t)/Math.PI;t=180*(Math.atan(n.y/i*2-1)-Math.atan(ri/i*2-1))/Math.PI*t/90+wi;h.pitch=.2*(t-f.pitch);f.pitch=t}}function si(n){ct&&(ct=!1,15<Date.now()-k&&(h.pitch=h.yaw=0),l.classList.add("pnlm-grab"),l.classList.remove("pnlm-grabbing"),k=Date.now(),et("mouseup",n))}function gi(n){var t,i;p&&f.draggable&&(vi(),ti(),f.roll=0,h.hfov=0,t=ht(n.targetTouches[0]),ii=t.x,ri=t.y,2==n.targetTouches.length&&(i=ht(n.targetTouches[1]),ii+=.5*(i.x-t.x),ri+=.5*(i.y-t.y),ui=Math.sqrt((t.x-i.x)*(t.x-i.x)+(t.y-i.y)*(t.y-i.y))),ct=!0,k=Date.now(),pi=f.yaw,wi=f.pitch,et("touchstart",n),v())}function nr(n){if(f.draggable&&(n.preventDefault(),p&&(k=Date.now()),ct&&p)){var t=ht(n.targetTouches[0]),i=t.x,r=t.y;2==n.targetTouches.length&&-1!=ui&&(n=ht(n.targetTouches[1]),i+=.5*(n.x-t.x),r+=.5*(n.y-t.y),t=Math.sqrt((t.x-n.x)*(t.x-n.x)+(t.y-n.y)*(t.y-n.y)),g(f.hfov+.1*(ui-t)),ui=t);t=f.hfov/360;i=(ii-i)*t+pi;h.yaw=(i-f.yaw)%360*.2;f.yaw=i;r=(r-ri)*t+wi;h.pitch=.2*(r-f.pitch);f.pitch=r}}function tr(){ct=!1;150<Date.now()-k&&(h.pitch=h.yaw=0);ui=-1;k=Date.now();et("touchend",event)}function kr(n){"touch"==n.pointerType&&(st.push(n.pointerId),yt.push({clientX:n.clientX,clientY:n.clientY}),n.targetTouches=yt,gi(n),n.preventDefault())}function dr(n){if("touch"==n.pointerType)for(var t=0;t<st.length;t++)if(n.pointerId==st[t]){yt[t].clientX=n.clientX;yt[t].clientY=n.clientY;n.targetTouches=yt;nr(n);break}}function hi(n){if("touch"==n.pointerType){for(var r=!1,t=0;t<st.length;t++)n.pointerId==st[t]&&(st[t]=i),st[t]&&(r=!0);r||(st=[],yt=[],tr());n.preventDefault()}}function ci(n){p&&("fullscreenonly"!=f.mouseZoom||fi)&&(n.preventDefault(),vi(),k=Date.now(),n.wheelDeltaY?(g(f.hfov-.05*n.wheelDeltaY),h.hfov=0>n.wheelDelta?1:-1):n.wheelDelta?(g(f.hfov-.05*n.wheelDelta),h.hfov=0>n.wheelDelta?1:-1):n.detail&&(g(f.hfov+1.5*n.detail),h.hfov=0<n.detail?1:-1),v())}function gr(n){vi();k=Date.now();ti();f.roll=0;var t=n.which||n.keycode;0>hu.indexOf(t)||(n.preventDefault(),27==t?fi&&fr():iu(t,!0))}function nu(){for(var n=0;10>n;n++)o[n]=!1}function tu(n){var t=n.which||n.keycode;0>hu.indexOf(t)||(n.preventDefault(),iu(t,!1))}function iu(n,t){var i=!1;switch(n){case 109:case 189:case 17:case 173:o[0]!=t&&(i=!0);o[0]=t;break;case 107:case 187:case 16:case 61:o[1]!=t&&(i=!0);o[1]=t;break;case 38:o[2]!=t&&(i=!0);o[2]=t;break;case 87:o[6]!=t&&(i=!0);o[6]=t;break;case 40:o[3]!=t&&(i=!0);o[3]=t;break;case 83:o[7]!=t&&(i=!0);o[7]=t;break;case 37:o[4]!=t&&(i=!0);o[4]=t;break;case 65:o[8]!=t&&(i=!0);o[8]=t;break;case 39:o[5]!=t&&(i=!0);o[5]=t;break;case 68:o[9]!=t&&(i=!0);o[9]=t}i&&t&&(ot="undefined"!=typeof performance&&performance.now()?performance.now():Date.now(),v())}function lu(){var n;if(p){var t=!1,r=f.pitch,e=f.yaw,s=f.hfov,u;if(u="undefined"!=typeof performance&&performance.now()?performance.now():Date.now(),ot===i&&(ot=u),n=(u-ot)*f.hfov/1700,n=Math.min(n,1),o[0]&&!0===f.keyboardZoom&&(g(f.hfov+(.8*h.hfov+.5)*n),t=!0),o[1]&&!0===f.keyboardZoom&&(g(f.hfov+(.8*h.hfov-.2)*n),t=!0),(o[2]||o[6])&&(f.pitch+=(.8*h.pitch+.2)*n,t=!0),(o[3]||o[7])&&(f.pitch+=(.8*h.pitch-.2)*n,t=!0),(o[4]||o[8])&&(f.yaw+=(.8*h.yaw-.2)*n,t=!0),(o[5]||o[9])&&(f.yaw+=(.8*h.yaw+.2)*n,t=!0),t&&(k=Date.now()),Date.now(),f.autoRotate){if(.001<u-ot){var t=(u-ot)/1e3,c=(h.yaw/t*n-.2*f.autoRotate)*t,c=(0<-f.autoRotate?1:-1)*Math.min(Math.abs(f.autoRotate*t),Math.abs(c));f.yaw+=c}f.autoRotateStopDelay&&(f.autoRotateStopDelay-=u-ot,0>=f.autoRotateStopDelay&&(f.autoRotateStopDelay=!1,nt=f.autoRotate,f.autoRotate=0))}y.pitch&&(ir("pitch"),r=f.pitch);y.yaw&&(ir("yaw"),e=f.yaw);y.hfov&&(ir("hfov"),s=f.hfov);0<n&&!f.autoRotate&&(o[4]||o[5]||o[8]||o[9]||y.yaw||(f.yaw+=h.yaw*n*.85),o[2]||o[3]||o[6]||o[7]||y.pitch||(f.pitch+=h.pitch*n*.85),o[0]||o[1]||y.hfov||g(f.hfov+h.hfov*n*.85));ot=u;0<n&&(h.yaw=.8*h.yaw+(f.yaw-e)/n*.2,h.pitch=.8*h.pitch+(f.pitch-r)/n*.2,h.hfov=.8*h.hfov+(f.hfov-s)/n*.2,r=f.autoRotate?Math.abs(f.autoRotate):5,h.yaw=Math.min(r,Math.max(h.yaw,-r)),h.pitch=Math.min(r,Math.max(h.pitch,-r)),h.hfov=Math.min(r,Math.max(h.hfov,-r)));o[0]&&o[0]&&(h.hfov=0);(o[2]||o[6])&&(o[3]||o[7])&&(h.pitch=0);(o[4]||o[8])&&(o[5]||o[9])&&(h.yaw=0)}}function ir(n){var t=y[n],i=Math.min(1,Math.max((Date.now()-t.startTime)/1e3/(t.duration/1e3),0)),i=t.startPosition+f.animationTimingFunction(i)*(t.endPosition-t.startPosition),r;(t.endPosition>t.startPosition&&i>=t.endPosition||t.endPosition<t.startPosition&&i<=t.endPosition||t.endPosition===t.startPosition)&&(i=t.endPosition,h[n]=0,t=y[n].callback,r=y[n].callbackArgs,delete y[n],"function"==typeof t&&t(r));f[n]=i}function li(){tt()}function v(){sr||(sr=!0,ni())}function ni(){if(au(),hr&&clearTimeout(hr),ct||!0===it)requestAnimationFrame(ni);else if(o[0]||o[1]||o[2]||o[3]||o[4]||o[5]||o[6]||o[7]||o[8]||o[9]||f.autoRotate||y.pitch||y.yaw||y.hfov||.01<Math.abs(h.yaw)||.01<Math.abs(h.pitch)||.01<Math.abs(h.hfov))lu(),0<=f.autoRotateInactivityDelay&&nt&&Date.now()-k>f.autoRotateInactivityDelay&&!f.autoRotate&&(f.autoRotate=nt,wt.lookAt(ei,i,bt,3e3)),requestAnimationFrame(ni);else if(c&&(c.isLoading()||!0===f.dynamic&&su))requestAnimationFrame(ni);else{sr=!1;ot=i;var n=f.autoRotateInactivityDelay-(Date.now()-k);0<n?hr=setTimeout(function(){f.autoRotate=nt;wt.lookAt(ei,i,bt,3e3);v()},n):0<=f.autoRotateInactivityDelay&&nt&&(f.autoRotate=nt,wt.lookAt(ei,i,bt,3e3),v())}}function au(){var t;if(p){180<f.yaw?f.yaw-=360:-180>f.yaw&&(f.yaw+=360);t=f.yaw;var i=f.maxYaw-f.minYaw,n=-180,r=180;360>i&&(n=f.minYaw+f.hfov/2,r=f.maxYaw-f.hfov/2,i<f.hfov&&(n=r=(n+r)/2));f.yaw=Math.max(n,Math.min(r,f.yaw));!1!==f.autoRotate&&t!=f.yaw&&(f.autoRotate*=-1);t=c.getCanvas();t=2*Math.atan(Math.tan(f.hfov/180*Math.PI*.5)/(t.width/t.height))/Math.PI*180;i=f.minPitch+t/2;n=f.maxPitch-t/2;f.maxPitch-f.minPitch<t&&(i=n=(i+n)/2);isNaN(i)&&(i=-90);isNaN(n)&&(n=90);f.pitch=Math.max(i,Math.min(n,f.pitch));c.render(f.pitch*Math.PI/180,f.yaw*Math.PI/180,f.hfov*Math.PI/180,{roll:f.roll*Math.PI/180});f.hotSpots.forEach(rr);f.compass&&(kt.style.transform="rotate("+(-f.yaw-f.northOffset)+"deg)",kt.style.webkitTransform="rotate("+(-f.yaw-f.northOffset)+"deg)")}}function pt(n,t,i,r){this.w=n;this.x=t;this.y=i;this.z=r}function ru(t){var r,i;r=t.alpha;i=t.beta;t=t.gamma;i=[i?i*Math.PI/360:0,t?t*Math.PI/360:0,r?r*Math.PI/360:0];r=[Math.cos(i[0]),Math.cos(i[1]),Math.cos(i[2])];i=[Math.sin(i[0]),Math.sin(i[1]),Math.sin(i[2])];r=new pt(r[0]*r[1]*r[2]-i[0]*i[1]*i[2],i[0]*r[1]*r[2]-r[0]*i[1]*i[2],r[0]*i[1]*r[2]+i[0]*r[1]*i[2],r[0]*r[1]*i[2]+i[0]*i[1]*r[2]);r=r.multiply(new pt(Math.sqrt(.5),-Math.sqrt(.5),0,0));i=n.orientation?-n.orientation*Math.PI/360:0;r=r.multiply(new pt(Math.cos(i),0,-Math.sin(i),0)).toEulerAngles();"number"==typeof it&&10>it?it+=1:10===it?(ou=r[2]/Math.PI*180+f.yaw,it=!0,requestAnimationFrame(ni)):(f.pitch=r[0]/Math.PI*180,f.roll=-r[1]/Math.PI*180,f.yaw=-r[2]/Math.PI*180+ou)}function vu(){try{var t={};f.horizonPitch!==i&&(t.horizonPitch=f.horizonPitch*Math.PI/180);f.horizonRoll!==i&&(t.horizonRoll=f.horizonRoll*Math.PI/180);f.backgroundColor!==i&&(t.backgroundColor=f.backgroundColor);c.init(b,f.type,f.dynamic,f.haov*Math.PI/180,f.vaov*Math.PI/180,f.vOffset*Math.PI/180,yu,t);!0!==f.dynamic&&(b=i)}catch(n){if("webgl error"==n.type||"no webgl"==n.type)ft();else if("webgl size error"==n.type)ft(f.strings.textureSizeError.replace("%s",n.width).replace("%s",n.maxWidth));else throw ft(f.strings.unknownError),n;}}function yu(){if(f.sceneFadeDuration&&c.fadeImg!==i){c.fadeImg.style.opacity=0;var n=c.fadeImg;delete c.fadeImg;setTimeout(function(){w.removeChild(n);et("scenechangefadedone")},f.sceneFadeDuration)}kt.style.display=f.compass?"inline":"none";pu();e.load.box.style.display="none";at!==i&&(w.removeChild(at),at=i);p=!0;et("load");v()}function uu(n){var i,r,u,e,o;n.pitch=Number(n.pitch)||0;n.yaw=Number(n.yaw)||0;i=t.createElement("div");i.className="pnlm-hotspot-base";i.className=n.cssClass?i.className+(" "+n.cssClass):i.className+(" pnlm-hotspot pnlm-sprite pnlm-"+lt(n.type));r=t.createElement("span");n.text&&(r.innerHTML=lt(n.text));n.video?(u=t.createElement("video"),e=n.video,f.basePath&&!dt(e)&&(e=f.basePath+e),u.src=encodeURI(e),u.controls=!0,u.style.width=n.width+"px",w.appendChild(i),r.appendChild(u)):n.image?(e=n.image,f.basePath&&!dt(e)&&(e=f.basePath+e),u=t.createElement("a"),u.href=encodeURI(n.URL?n.URL:e),u.target="_blank",r.appendChild(u),o=t.createElement("img"),o.src=encodeURI(e),o.style.width=n.width+"px",o.style.paddingTop="5px",w.appendChild(i),u.appendChild(o),r.style.maxWidth="initial"):n.URL?(u=t.createElement("a"),u.href=encodeURI(n.URL),u.target="_blank",w.appendChild(u),i.style.cursor="pointer",r.style.cursor="pointer",u.appendChild(i)):(n.sceneId&&(i.onclick=i.ontouchend=function(){return i.clicked||(i.clicked=!0,er(n.sceneId,n.targetPitch,n.targetYaw,n.targetHfov)),!1},i.style.cursor="pointer",r.style.cursor="pointer"),w.appendChild(i));n.createTooltipFunc?n.createTooltipFunc(i,n.createTooltipArgs):(n.text||n.video||n.image)&&(i.classList.add("pnlm-tooltip"),i.appendChild(r),r.style.width=r.scrollWidth-20+"px",r.style.marginLeft=-(r.scrollWidth-i.offsetWidth)/2+"px",r.style.marginTop=-r.scrollHeight-12+"px");n.clickHandlerFunc&&(i.addEventListener("click",function(t){n.clickHandlerFunc(t,n.clickHandlerArgs)},"false"),i.style.cursor="pointer",r.style.cursor="pointer");n.div=i}function pu(){cr||(f.hotSpots?(f.hotSpots=f.hotSpots.sort(function(n,t){return n.pitch<t.pitch}),f.hotSpots.forEach(uu)):f.hotSpots=[],cr=!0,f.hotSpots.forEach(rr))}function wu(){var i=f.hotSpots,n,t;if(cr=!1,delete f.hotSpots,i)for(n=0;n<i.length;n++){for(t=i[n].div;t.parentNode!=w;)t=t.parentNode;w.removeChild(t);delete i[n].div}}function rr(n){var t=Math.sin(n.pitch*Math.PI/180),r=Math.cos(n.pitch*Math.PI/180),u=Math.sin(f.pitch*Math.PI/180),h=Math.cos(f.pitch*Math.PI/180),l=Math.cos((-n.yaw+f.yaw)*Math.PI/180),e=t*u+r*l*h,a,o;if(90>=n.yaw&&-90<n.yaw&&0>=e||(90<n.yaw||-90>=n.yaw)&&0>=e)n.div.style.visibility="hidden";else{a=Math.sin((-n.yaw+f.yaw)*Math.PI/180);o=Math.tan(f.hfov*Math.PI/360);n.div.style.visibility="visible";var s=c.getCanvas(),i=s.clientWidth,s=s.clientHeight,t=[-i/o*a*r/e/2,-i/o*(t*h-r*l*u)/e/2],r=Math.sin(f.roll*Math.PI/180),u=Math.cos(f.roll*Math.PI/180),t=[t[0]*u-t[1]*r,t[0]*r+t[1]*u];t[0]+=(i-n.div.offsetWidth)/2;t[1]+=(s-n.div.offsetHeight)/2;i="translate("+t[0]+"px, "+t[1]+"px) translateZ(9999px) rotate("+f.roll+"deg)";n.div.style.webkitTransform=i;n.div.style.MozTransform=i;n.div.style.transform=i}}function ai(n){var t,i,e,r;f={};e="haov vaov vOffset northOffset horizonPitch horizonRoll".split(" ");rt=[];for(t in lr)lr.hasOwnProperty(t)&&(f[t]=lr[t]);for(t in u.default)if(u.default.hasOwnProperty(t))if("strings"==t)for(i in u.default.strings)u.default.strings.hasOwnProperty(i)&&(f.strings[i]=lt(u.default.strings[i]));else f[t]=u.default[t],0<=e.indexOf(t)&&rt.push(t);if(null!==n&&""!==n&&u.scenes&&u.scenes[n]){r=u.scenes[n];for(t in r)if(r.hasOwnProperty(t))if("strings"==t)for(i in r.strings)r.strings.hasOwnProperty(i)&&(f.strings[i]=lt(r.strings[i]));else f[t]=r[t],0<=e.indexOf(t)&&rt.push(t);f.scene=n}for(t in u)if(u.hasOwnProperty(t))if("strings"==t)for(i in u.strings)u.strings.hasOwnProperty(i)&&(f.strings[i]=lt(u.strings[i]));else f[t]=u[t],0<=e.indexOf(t)&&rt.push(t)}function ur(n){var u,o,r;(n=n?n:!1)&&"preview"in f&&(u=f.preview,f.basePath&&!dt(u)&&(u=f.basePath+u),at=t.createElement("div"),at.className="pnlm-preview-img",at.style.backgroundImage="url('"+encodeURI(u)+"')",w.appendChild(at));u=f.title;o=f.author;n&&("previewTitle"in f&&(f.title=f.previewTitle),"previewAuthor"in f&&(f.author=f.previewAuthor));f.hasOwnProperty("title")||(e.title.innerHTML="");f.hasOwnProperty("author")||(e.author.innerHTML="");f.hasOwnProperty("title")||f.hasOwnProperty("author")||(e.container.style.display="none");s.load.innerHTML="<p>"+f.strings.loadButtonLabel+"<\/p>";e.load.boxp.innerHTML=f.strings.loadingLabel;for(r in f)if(f.hasOwnProperty(r))switch(r){case"title":e.title.innerHTML=lt(f[r]);e.container.style.display="inline";break;case"author":e.author.innerHTML=f.strings.bylineLabel.replace("%s",lt(f[r]));e.container.style.display="inline";break;case"fallback":e.errorMsg.innerHTML='<p>Your browser does not support WebGL.<br><a href="'+encodeURI(f[r])+'" target="_blank">Click here to view this panorama in an alternative viewer.<\/a><\/p>';break;case"hfov":g(Number(f[r]));break;case"autoLoad":!0===f[r]&&c===i&&(e.load.box.style.display="inline",s.load.style.display="none",yr());break;case"showZoomCtrl":s.zoom.style.display=f[r]&&!1!=f.showControls?"block":"none";break;case"showFullscreenCtrl":s.fullscreen.style.display=f[r]&&!1!=f.showControls&&("fullscreen"in t||"mozFullScreen"in t||"webkitIsFullScreen"in t||"msFullscreenElement"in t)?"block":"none";break;case"hotSpotDebug":ki.style.display=f[r]?"block":"none";break;case"showControls":f[r]||(s.orientation.style.display="none",s.zoom.style.display="none",s.fullscreen.style.display="none");break;case"orientationOnByDefault":f[r]&&(vt===i?ar=!0:!0===vt&&yi())}n&&(u?f.title=u:delete f.title,o?f.author=o:delete f.author)}function fr(){if(p&&!bi)if(fi)t.exitFullscreen?t.exitFullscreen():t.mozCancelFullScreen?t.mozCancelFullScreen():t.webkitCancelFullScreen?t.webkitCancelFullScreen():t.msExitFullscreen&&t.msExitFullscreen();else try{r.requestFullscreen?r.requestFullscreen():r.mozRequestFullScreen?r.mozRequestFullScreen():r.msRequestFullscreen?r.msRequestFullscreen():r.webkitRequestFullScreen()}catch(n){}}function tt(){t.fullscreen||t.mozFullScreen||t.webkitIsFullScreen||t.msFullscreenElement?(s.fullscreen.classList.add("pnlm-fullscreen-toggle-button-active"),fi=!0):(s.fullscreen.classList.remove("pnlm-fullscreen-toggle-button-active"),fi=!1);c.resize();g(f.hfov);v()}function fu(n){var t=f.minHfov;return"multires"==f.type&&c&&(t=Math.min(t,c.getCanvas().width/(f.multiRes.cubeResolution/90*.9))),t>f.maxHfov?(console.log("HFOV bounds do not make sense (minHfov > maxHfov)."),f.hfov):n<t?t:n>f.maxHfov?f.maxHfov:n}function g(n){f.hfov=fu(n)}function vi(){y={};nt=f.autoRotate?f.autoRotate:nt;f.autoRotate=!1}function eu(){bi&&(e.load.box.style.display="none",e.errorMsg.style.display="none",bi=!1,et("errorcleared"));s.load.style.display="none";e.load.box.style.display="inline";yr()}function er(n,t,r,e,o){p=!1;y={};var s,l;if(f.sceneFadeDuration&&!o&&(s=c.render(f.pitch*Math.PI/180,f.yaw*Math.PI/180,f.hfov*Math.PI/180,{returnImage:!0}),s!==i)){o=new Image;o.className="pnlm-fade-img";o.style.transition="opacity "+f.sceneFadeDuration/1e3+"s";o.style.width="100%";o.style.height="100%";o.onload=function(){er(n,t,r,e,!0)};o.src=s;w.appendChild(o);c.fadeImg=o;return}o="same"===t?f.pitch:t;s="same"===r?f.yaw:"sameAzimuth"===r?f.yaw+(f.northOffset||0)-(u.scenes[n].northOffset||0):r;l="same"===e?f.hfov:e;wu();ai(n);h.yaw=h.pitch=h.hfov=0;ur();o!==i&&(f.pitch=o);s!==i&&(f.yaw=s);l!==i&&(f.hfov=l);et("scenechange",n);eu()}function ti(){n.removeEventListener("deviceorientation",ru);s.orientation.classList.remove("pnlm-orientation-button-active");it=!1}function yi(){it=1;n.addEventListener("deviceorientation",ru);s.orientation.classList.add("pnlm-orientation-button-active")}function lt(n){return u.escapeHTML?String(n).split(/&/g).join("&amp;").split('"').join("&quot;").split("'").join("&#39;").split("<").join("&lt;").split(">").join("&gt;").split("/").join("&#x2f;").split("\n").join("<br>"):String(n).split("\n").join("<br>")}function et(n){if(n in d)for(var t=d[n].length;0<t;t--)d[n][d[n].length-t].apply(null,[].slice.call(arguments,1))}var wt=this,f,c,at,ct=!1,k=Date.now(),ii=0,ri=0,ui=-1,pi=0,wi=0,o=Array(10),fi=!1,p=!1,bi=!1,or=!1,b,ot,h={yaw:0,pitch:0,hfov:0},sr=!1,it=!1,ou=0,hr,nt=0,bt,ei,y={},d={},rt=[],su=!1,cr=!1,lr={hfov:100,minHfov:50,maxHfov:120,pitch:0,minPitch:i,maxPitch:i,yaw:0,minYaw:-180,maxYaw:180,roll:0,haov:360,vaov:180,vOffset:0,autoRotate:!1,autoRotateInactivityDelay:-1,autoRotateStopDelay:i,type:"equirectangular",northOffset:0,showFullscreenCtrl:!0,dynamic:!1,doubleClickZoom:!0,keyboardZoom:!0,mouseZoom:!0,showZoomCtrl:!0,autoLoad:!1,showControls:!0,orientationOnByDefault:!1,hotSpotDebug:!1,backgroundColor:[0,0,0],animationTimingFunction:function(n){return.5>n?2*n*n:-1+(4-2*n)*n},draggable:!0,disableKeyboardCtrl:!1,crossOrigin:"anonymous",strings:{loadButtonLabel:"Click to<br>Load<br>Panorama",loadingLabel:"Loading...",bylineLabel:"by %s",noPanoramaError:"No panorama image was specified.",fileAccessError:"The file %s could not be accessed.",malformedURLError:"There is something wrong with the panorama URL.",iOS8WebGLError:"Due to iOS 8's broken WebGL implementation, only progressive encoded JPEGs work for your device (this panorama uses standard encoding).",genericWebGLError:"Your browser does not have the necessary WebGL support to display this panorama.",textureSizeError:"This panorama is too big for your device! It's %spx wide, but your device only supports images up to %spx wide. Try another device. (If you're the author, try scaling down the image.)",unknownError:"Unknown error. Check developer console."}},hu=[16,17,27,37,38,39,40,61,65,68,83,87,107,109,173,187,189],l,w,a,ut,e,ki,s,vt,ar,kt,st,yt;r="string"==typeof r?t.getElementById(r):r;r.classList.add("pnlm-container");r.tabIndex=0;l=t.createElement("div");l.className="pnlm-ui";r.appendChild(l);w=t.createElement("div");w.className="pnlm-render-container";r.appendChild(w);a=t.createElement("div");a.className="pnlm-dragfix";l.appendChild(a);ut=t.createElement("span");ut.className="pnlm-about-msg";ut.innerHTML='<a href="https://pannellum.org/" target="_blank">Pannellum<\/a> 2.4.0';l.appendChild(ut);a.addEventListener("contextmenu",gt);e={};ki=t.createElement("div");ki.className="pnlm-sprite pnlm-hot-spot-debug-indicator";l.appendChild(ki);e.container=t.createElement("div");e.container.className="pnlm-panorama-info";e.title=t.createElement("div");e.title.className="pnlm-title-box";e.container.appendChild(e.title);e.author=t.createElement("div");e.author.className="pnlm-author-box";e.container.appendChild(e.author);l.appendChild(e.container);e.load={};e.load.box=t.createElement("div");e.load.box.className="pnlm-load-box";e.load.boxp=t.createElement("p");e.load.box.appendChild(e.load.boxp);e.load.lbox=t.createElement("div");e.load.lbox.className="pnlm-lbox";e.load.lbox.innerHTML='<div class="pnlm-loading"><\/div>';e.load.box.appendChild(e.load.lbox);e.load.lbar=t.createElement("div");e.load.lbar.className="pnlm-lbar";e.load.lbarFill=t.createElement("div");e.load.lbarFill.className="pnlm-lbar-fill";e.load.lbar.appendChild(e.load.lbarFill);e.load.box.appendChild(e.load.lbar);e.load.msg=t.createElement("p");e.load.msg.className="pnlm-lmsg";e.load.box.appendChild(e.load.msg);l.appendChild(e.load.box);e.errorMsg=t.createElement("div");e.errorMsg.className="pnlm-error-msg pnlm-info-box";l.appendChild(e.errorMsg);s={};s.container=t.createElement("div");s.container.className="pnlm-controls-container";l.appendChild(s.container);s.load=t.createElement("div");s.load.className="pnlm-load-button";s.load.addEventListener("click",function(){ur();eu()});l.appendChild(s.load);s.zoom=t.createElement("div");s.zoom.className="pnlm-zoom-controls pnlm-controls";s.zoomIn=t.createElement("div");s.zoomIn.className="pnlm-zoom-in pnlm-sprite pnlm-control";s.zoomIn.addEventListener("click",function(){p&&(g(f.hfov-5),v())});s.zoom.appendChild(s.zoomIn);s.zoomOut=t.createElement("div");s.zoomOut.className="pnlm-zoom-out pnlm-sprite pnlm-control";s.zoomOut.addEventListener("click",function(){p&&(g(f.hfov+5),v())});s.zoom.appendChild(s.zoomOut);s.container.appendChild(s.zoom);s.fullscreen=t.createElement("div");s.fullscreen.addEventListener("click",fr);s.fullscreen.className="pnlm-fullscreen-toggle-button pnlm-sprite pnlm-fullscreen-toggle-button-inactive pnlm-controls pnlm-control";(t.fullscreenEnabled||t.mozFullScreenEnabled||t.webkitFullscreenEnabled||t.msFullscreenEnabled)&&s.container.appendChild(s.fullscreen);s.orientation=t.createElement("div");s.orientation.addEventListener("click",function(){it?ti():yi()});s.orientation.addEventListener("mousedown",function(n){n.stopPropagation()});s.orientation.addEventListener("touchstart",function(n){n.stopPropagation()});s.orientation.addEventListener("pointerdown",function(n){n.stopPropagation()});s.orientation.className="pnlm-orientation-button pnlm-orientation-button-inactive pnlm-sprite pnlm-controls pnlm-control";ar=!1;n.DeviceOrientationEvent?n.addEventListener("deviceorientation",vr):vt=!1;kt=t.createElement("div");kt.className="pnlm-compass pnlm-controls pnlm-control";l.appendChild(kt);u.firstScene?ai(u.firstScene):u.default&&u.default.firstScene?ai(u.default.firstScene):ai(null);ur(!0);st=[];yt=[];pt.prototype.multiply=function(n){return new pt(this.w*n.w-this.x*n.x-this.y*n.y-this.z*n.z,this.x*n.w+this.w*n.x+this.y*n.z-this.z*n.y,this.y*n.w+this.w*n.y+this.z*n.x-this.x*n.z,this.z*n.w+this.w*n.z+this.x*n.y-this.y*n.x)};pt.prototype.toEulerAngles=function(){var n=Math.atan2(2*(this.w*this.x+this.y*this.z),1-2*(this.x*this.x+this.y*this.y)),t=Math.asin(2*(this.w*this.y-this.z*this.x)),i=Math.atan2(2*(this.w*this.z+this.x*this.y),1-2*(this.y*this.y+this.z*this.z));return[n,t,i]};this.isLoaded=function(){return p};this.getPitch=function(){return f.pitch};this.setPitch=function(n,t,r,u){return(t=t==i?1e3:Number(t))?y.pitch={startTime:Date.now(),startPosition:f.pitch,endPosition:n,duration:t,callback:r,callbackArgs:u}:f.pitch=n,v(),this};this.getPitchBounds=function(){return[f.minPitch,f.maxPitch]};this.setPitchBounds=function(n){return f.minPitch=Math.max(-90,Math.min(n[0],90)),f.maxPitch=Math.max(-90,Math.min(n[1],90)),this};this.getYaw=function(){return f.yaw};this.setYaw=function(n,t,r,u){return t=t==i?1e3:Number(t),n=(n+180)%360-180,t?(180<f.yaw-n?n+=360:180<n-f.yaw&&(n-=360),y.yaw={startTime:Date.now(),startPosition:f.yaw,endPosition:n,duration:t,callback:r,callbackArgs:u}):f.yaw=n,v(),this};this.getYawBounds=function(){return[f.minYaw,f.maxYaw]};this.setYawBounds=function(n){return f.minYaw=Math.max(-180,Math.min(n[0],180)),f.maxYaw=Math.max(-180,Math.min(n[1],180)),this};this.getHfov=function(){return f.hfov};this.setHfov=function(n,t,r,u){return(t=t==i?1e3:Number(t))?y.hfov={startTime:Date.now(),startPosition:f.hfov,endPosition:fu(n),duration:t,callback:r,callbackArgs:u}:g(n),v(),this};this.getHfovBounds=function(){return[f.minHfov,f.maxHfov]};this.setHfovBounds=function(n){return f.minHfov=Math.max(0,n[0]),f.maxHfov=Math.max(0,n[1]),this};this.lookAt=function(n,t,r,u,f,e){return u=u==i?1e3:Number(u),n!==i&&(this.setPitch(n,u,f,e),f=i),t!==i&&(this.setYaw(t,u,f,e),f=i),r!==i&&this.setHfov(r,u,f,e),this};this.getNorthOffset=function(){return f.northOffset};this.setNorthOffset=function(n){return f.northOffset=Math.min(360,Math.max(0,n)),v(),this};this.getHorizonRoll=function(){return f.horizonRoll};this.setHorizonRoll=function(n){return f.horizonRoll=Math.min(90,Math.max(-90,n)),c.setPose(f.horizonPitch*Math.PI/180,f.horizonRoll*Math.PI/180),v(),this};this.getHorizonPitch=function(){return f.horizonPitch};this.setHorizonPitch=function(n){return f.horizonPitch=Math.min(90,Math.max(-90,n)),c.setPose(f.horizonPitch*Math.PI/180,f.horizonRoll*Math.PI/180),v(),this};this.startAutoRotate=function(n){return n=n||nt||1,f.autoRotate=n,wt.lookAt(ei,i,bt,3e3),v(),this};this.stopAutoRotate=function(){return nt=f.autoRotate?f.autoRotate:nt,f.autoRotate=!1,f.autoRotateInactivityDelay=-1,this};this.getRenderer=function(){return c};this.setUpdate=function(n){return su=!0===n,c===i?oi():v(),this};this.mouseEventToCoords=function(n){return di(n)};this.loadScene=function(n,t,i,r){return p&&er(n,t,i,r),this};this.getScene=function(){return f.scene};this.addScene=function(n,t){return u.scenes[n]=t,this};this.removeScene=function(n){return f.scene===n||!u.scenes.hasOwnProperty(n)?!1:(delete u.scenes[n],!0)};this.toggleFullscreen=function(){return fr(),this};this.getConfig=function(){return f};this.getContainer=function(){return r};this.addHotSpot=function(n,t){if(t===i&&f.scene===i)f.hotSpots.push(n);else{var r=t!==i?t:f.scene;if(u.scenes.hasOwnProperty(r))u.scenes[r].hasOwnProperty("hotSpots")||(u.scenes[r].hotSpots=[],r==f.scene&&(f.hotSpots=u.scenes[r].hotSpots)),u.scenes[r].hotSpots.push(n);else throw"Invalid scene ID!";}return(t===i||f.scene==t)&&(uu(n),p&&rr(n)),this};this.removeHotSpot=function(n){if(!f.hotSpots)return!1;for(var t=0;t<f.hotSpots.length;t++)if(f.hotSpots[t].hasOwnProperty("id")&&f.hotSpots[t].id===n){for(n=f.hotSpots[t].div;n.parentNode!=w;)n=n.parentNode;return w.removeChild(n),delete f.hotSpots[t].div,f.hotSpots.splice(t,1),!0}return!1};this.resize=function(){tt()};this.isLoaded=function(){return p};this.isOrientationSupported=function(){return vt||!1};this.stopOrientation=function(){ti()};this.startOrientation=function(){vt&&yi()};this.isOrientationActive=function(){return Boolean(it)};this.on=function(n,t){return d[n]=d[n]||[],d[n].push(t),this};this.off=function(n,t){if(!n)return d={},this;if(t){var i=d[n].indexOf(t);0<=i&&d[n].splice(i,1);0==d[n].length&&delete d[n]}else delete d[n];return this};this.destroy=function(){c&&c.destroy();or&&(a.removeEventListener("mousedown",pr,!1),a.removeEventListener("dblclick",wr,!1),t.removeEventListener("mousemove",br,!1),t.removeEventListener("mouseup",si,!1),r.removeEventListener("mousewheel",ci,!1),r.removeEventListener("DOMMouseScroll",ci,!1),r.removeEventListener("mozfullscreenchange",tt,!1),r.removeEventListener("webkitfullscreenchange",tt,!1),r.removeEventListener("msfullscreenchange",tt,!1),r.removeEventListener("fullscreenchange",tt,!1),n.removeEventListener("resize",li,!1),n.removeEventListener("orientationchange",li,!1),r.removeEventListener("keydown",gr,!1),r.removeEventListener("keyup",tu,!1),r.removeEventListener("blur",nu,!1),t.removeEventListener("mouseleave",si,!1),a.removeEventListener("touchstart",gi,!1),a.removeEventListener("touchmove",nr,!1),a.removeEventListener("touchend",tr,!1),a.removeEventListener("pointerdown",kr,!1),a.removeEventListener("pointermove",dr,!1),a.removeEventListener("pointerup",hi,!1),a.removeEventListener("pointerleave",hi,!1));r.innerHTML="";r.classList.remove("pnlm-container");l.classList.remove("pnlm-grab");l.classList.remove("pnlm-grabbing")}}return{viewer:function(n,t){return new r(n,t)}}}(window,document);